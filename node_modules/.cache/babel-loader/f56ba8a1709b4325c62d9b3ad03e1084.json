{"ast":null,"code":"var _jsxFileName = \"/Users/davidbrister/nscc-react/react-final/src/App.js\";\nimport React from 'react';\nimport api from './api';\nimport AddForm from './components/AddForm';\nimport EditForm from './components/EditForm';\nimport Table from './components/Table';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._addEntry = entry => {\n      api.addItem(entry).then(results => {\n        this.setState({\n          entries: [...this.state.entries, results.data.item]\n        });\n      }).catch(error => {\n        console.log('Failed to add item');\n      });\n    };\n\n    this._editEntry = entry => {\n      this.setState({\n        editingItem: entry\n      });\n    };\n\n    this._updateEntry = entry => {\n      api.updateItem(entry).then(() => {\n        //update entries\n        //return new entry where id matches one being edited\n        this.setState({\n          editingItem: null,\n          entries: [...this.state.entries].map(i => {\n            if (i.id === entry.id) {\n              return entry;\n            } else {\n              return i;\n            }\n          })\n        });\n      }).catch(error => {\n        console.log('Failed to update item');\n      });\n    };\n\n    this._deleteEntry = entry => {\n      api.deleteItem(entry).then(() => {\n        //filter entries where ids dont match one being deleted\n        this.setState({\n          entries: [...this.state.entries].filter(i => i.id !== entry.id)\n        });\n      }).catch(error => {\n        console.log('Failed to delete item');\n      });\n    };\n\n    this.state = {\n      entries: [],\n      editingItem: null\n    };\n  }\n\n  componentDidMount() {\n    //fetch items from the server\n    api.fetchItems().then(results => {\n      this.setState({\n        entries: results.data.items\n      });\n    }).catch(error => {\n      console.log('Something went wrong...');\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(AddForm, {\n      editing: this.state.editingItem,\n      onAddEntry: this._addEntry,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), this.state.editingItem ? React.createElement(EditForm, {\n      editing: this.state.editingItem,\n      onUpdateEntry: this._updateEntry,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }) : null, React.createElement(Table, {\n      entries: this.state.entries,\n      onEditItem: this._editEntry,\n      onDeleteItem: this._deleteEntry,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/davidbrister/nscc-react/react-final/src/App.js"],"names":["React","api","AddForm","EditForm","Table","App","Component","constructor","props","_addEntry","entry","addItem","then","results","setState","entries","state","data","item","catch","error","console","log","_editEntry","editingItem","_updateEntry","updateItem","map","i","id","_deleteEntry","deleteItem","filter","componentDidMount","fetchItems","items","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport api from './api';\nimport AddForm from './components/AddForm';\nimport EditForm from './components/EditForm';\nimport Table from './components/Table';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n      \n      this.state = {\n        entries: [],\n        editingItem: null\n      };\n  }\n  componentDidMount() {\n    //fetch items from the server\n    api\n    .fetchItems()\n    .then(results => {\n      this.setState({\n        entries: results.data.items\n      });\n    })\n    .catch(error => {\n      console.log('Something went wrong...');\n    });\n  }\n\n  _addEntry = entry => {\n    api\n    .addItem(entry)\n    .then(results => {\n      this.setState({\n        entries: [...this.state.entries, results.data.item]\n      });\n    })\n    .catch(error => {\n      console.log('Failed to add item');\n    });\n  };\n\n  _editEntry = entry => {\n    this.setState({\n      editingItem: entry\n    });\n  };\n\n  _updateEntry = entry => {\n    api\n    .updateItem(entry)\n    .then(() => {\n      //update entries\n      //return new entry where id matches one being edited\n      this.setState({\n        editingItem:null,\n        entries: [...this.state.entries].map(i => {\n          if (i.id === entry.id) {\n            return entry;\n          }else {\n            return i;\n          }\n        })\n      });\n    })\n    .catch(error => {\n      console.log('Failed to update item');\n    });\n  }\n\n  _deleteEntry = entry => {\n    api\n    .deleteItem(entry)\n    .then(() => {\n      //filter entries where ids dont match one being deleted\n      this.setState({\n        entries: [...this.state.entries].filter(i => i.id !== entry.id)\n\n      });\n    })\n    .catch(error => {\n      console.log('Failed to delete item');\n    });\n  };\n\n  render(){\n    return(\n        <div className=\"App\">\n        <AddForm editing={this.state.editingItem}\n                  onAddEntry={this._addEntry} />\n        {this.state.editingItem ? (\n          <EditForm\n            editing={this.state.editingItem}\n            onUpdateEntry={this._updateEntry}\n            />\n        ) : null }\n\n        <Table\n          entries={this.state.entries}\n          onEditItem={this._editEntry}\n          onDeleteItem={this._deleteEntry}\n          />\n        </div>\n    );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}